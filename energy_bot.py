import os
import logging
import random
import asyncio
import aiohttp
import threading
import time
from flask import Flask
from telegram import Update, ReplyKeyboardMarkup, KeyboardButton
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes
# –°–æ–∑–¥–∞–µ–º Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
app = Flask(__name__)

@app.route('/')
def health_check():
    return "ü§ñ –ë–æ—Ç –≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞–π–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç! Status: OK"

def run_flask():
    port = int(os.environ.get('PORT', 10000))
    app.run(host='0.0.0.0', port=port)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞
BOT_TOKEN = "7833930614:AAET_Lq5B4itg-1Dwzi2Ne3g-UylYK9jUQE"
# URL —Å–µ—Ä–≤–∏—Å–∞
RENDER_URL = "https://energosber.onrender.com"
# –î–∞–Ω–Ω—ã–µ –±–æ—Ç–∞
ENERGY_TIPS = {
    "—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ": [
        "üîå –í—ã–∫–ª—é—á–∞–π —Å–≤–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã—Ö–æ–¥–∏—à—å –∏–∑ –∫–æ–º–Ω–∞—Ç—ã",
        "üí° –ò—Å–ø–æ–ª—å–∑—É–π —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∏–µ –ª–∞–º–ø—ã - –æ–Ω–∏ —ç–∫–æ–Ω–æ–º—è—Ç –¥–æ 80% —ç–Ω–µ—Ä–≥–∏–∏",
        "üì± –û—Ç–∫–ª—é—á–∞–π –∑–∞—Ä—è–¥–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–∑ —Ä–æ–∑–µ—Ç–∫–∏ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è",
        "üñ•Ô∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π —Ä–µ–∂–∏–º —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–µ",
        "‚ùÑÔ∏è –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ —Å—Ç–∞–≤—å –ø–æ–¥–∞–ª—å—à–µ –æ—Ç –±–∞—Ç–∞—Ä–µ–π –∏ –ø–ª–∏—Ç—ã",
        "üîã –ò—Å–ø–æ–ª—å–∑—É–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä—ã –≤–º–µ—Å—Ç–æ –±–∞—Ç–∞—Ä–µ–µ–∫ - –∏—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞—Ä—è–∂–∞—Ç—å",
        "üåû –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –≤ –¥–Ω–µ–≤–Ω–æ–µ –≤—Ä–µ–º—è",
        "üìä –£—Å—Ç–∞–Ω–æ–≤–∏ —É–º–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞—Å—Ö–æ–¥–∞ —ç–Ω–µ—Ä–≥–∏–∏",
        "üîå –ò—Å–ø–æ–ª—å–∑—É–π —Å–µ—Ç–µ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã —Å –∫–Ω–æ–ø–∫–æ–π –≤—ã–∫–ª—é—á–µ–Ω–∏—è",
        "üí° –ö—Ä–∞—Å—å —Å—Ç–µ–Ω—ã –≤ —Å–≤–µ—Ç–ª—ã–µ —Ç–æ–Ω–∞ - –æ–Ω–∏ –ª—É—á—à–µ –æ—Ç—Ä–∞–∂–∞—é—Ç —Å–≤–µ—Ç",
        "üîå –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ–±—Ä–∞—â–∞–π –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∫–ª–∞—Å—Å —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
        "üïí –ò—Å–ø–æ–ª—å–∑—É–π —Ç–∞–π–º–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏–±–æ—Ä–æ–≤"
    ],
    "–≤–æ–¥–∞": [
        "üöø –ü—Ä–∏–Ω–∏–º–∞–π –¥—É—à –≤–º–µ—Å—Ç–æ –≤–∞–Ω–Ω—ã - —ç–∫–æ–Ω–æ–º–∏—è –¥–æ 100 –ª–∏—Ç—Ä–æ–≤ –≤–æ–¥—ã!",
        "üö∞ –ó–∞–∫—Ä—ã–≤–∞–π –∫—Ä–∞–Ω, –∫–æ–≥–¥–∞ —á–∏—Å—Ç–∏—à—å –∑—É–±—ã",
        "üíß –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ—Å—É–¥–æ–º–æ–µ—á–Ω—É—é –º–∞—à–∏–Ω—É —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ",
        "üîß –ü—Ä–æ–≤–µ—Ä—è–π, –Ω–µ—Ç –ª–∏ –ø—Ä–æ—Ç–µ—á–µ–∫ –≤ –∫—Ä–∞–Ω–∞—Ö",
        "üåßÔ∏è –°–æ–±–∏—Ä–∞–π –¥–æ–∂–¥–µ–≤—É—é –≤–æ–¥—É –¥–ª—è –ø–æ–ª–∏–≤–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π",
        "üöø –£—Å—Ç–∞–Ω–æ–≤–∏ —ç–∫–æ–Ω–æ–º–∏—á–Ω—É—é –¥—É—à–µ–≤—É—é –≥–æ–ª–æ–≤–∫—É - —ç–∫–æ–Ω–æ–º–∏—è –¥–æ 50% –≤–æ–¥—ã",
        "üíß –î–ª—è –º—ã—Ç—å—è —Ñ—Ä—É–∫—Ç–æ–≤ –∏ –æ–≤–æ—â–µ–π –∏—Å–ø–æ–ª—å–∑—É–π –º–∏—Å–∫—É, –∞ –Ω–µ –ø—Ä–æ—Ç–æ—á–Ω—É—é –≤–æ–¥—É",
        "üö∞ –ù–∞–≥—Ä–µ–≤–∞–π —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–¥—ã –¥–ª—è —á–∞—è",
        "üîß –£—Å—Ç–∞–Ω–æ–≤–∏ –∞—ç—Ä–∞—Ç–æ—Ä—ã –Ω–∞ –∫—Ä–∞–Ω—ã - –æ–Ω–∏ —Å–º–µ—à–∏–≤–∞—é—Ç –≤–æ–¥—É —Å –≤–æ–∑–¥—É—Ö–æ–º",
        "üíß –ü–æ–ª–∏–≤–∞–π —Ä–∞—Å—Ç–µ–Ω–∏—è —É—Ç—Ä–æ–º –∏–ª–∏ –≤–µ—á–µ—Ä–æ–º - –º–µ–Ω—å—à–µ –∏—Å–ø–∞—Ä–µ–Ω–∏—è",
        "üöø –ú–æ–π—Å—è –±—ã—Å—Ç—Ä–µ–µ - –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã –¥—É—à–∞ —ç–∫–æ–Ω–æ–º—è—Ç 30 –ª–∏—Ç—Ä–æ–≤ –≤–æ–¥—ã",
        "üîß –†–µ–≥—É–ª—è—Ä–Ω–æ —á–∏—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—ã –≤ —Å—Ç–∏—Ä–∞–ª—å–Ω–æ–π –∏ –ø–æ—Å—É–¥–æ–º–æ–µ—á–Ω–æ–π –º–∞—à–∏–Ω–∞—Ö"
    ],
    "–æ—Ç–æ–ø–ª–µ–Ω–∏–µ": [
        "üè† –£—Ç–µ–ø–ª–∏ –æ–∫–Ω–∞ –∏ –¥–≤–µ—Ä–∏ - —ç—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ç–µ–ø–ª–æ",
        "üå°Ô∏è –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ - 20-22¬∞C",
        "üîÜ –ù–µ –∑–∞–∫—Ä—ã–≤–∞–π –±–∞—Ç–∞—Ä–µ–∏ –º–µ–±–µ–ª—å—é –∏–ª–∏ —à—Ç–æ—Ä–∞–º–∏",
        "ü™ü –ü—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–π –∫–æ–º–Ω–∞—Ç—É –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ, –Ω–æ –Ω–µ–¥–æ–ª–≥–æ (5-10 –º–∏–Ω—É—Ç)",
        "üßπ –†–µ–≥—É–ª—è—Ä–Ω–æ —á–∏—Å—Ç–∏ –±–∞—Ç–∞—Ä–µ–∏ –æ—Ç –ø—ã–ª–∏",
        "ü™ü –£—Å—Ç–∞–Ω–æ–≤–∏ —Ç–µ–ø–ª–æ–æ—Ç—Ä–∞–∂–∞—é—â–∏–µ —ç–∫—Ä–∞–Ω—ã –∑–∞ –±–∞—Ç–∞—Ä–µ—è–º–∏",
        "üå°Ô∏è –ù–∞ –Ω–æ—á—å –º–æ–∂–Ω–æ —Å–Ω–∏–∂–∞—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –Ω–∞ 2-3 –≥—Ä–∞–¥—É—Å–∞",
        "üè† –£—Ç–µ–ø–ª–∏ –ø–æ–ª –∏ —á–µ—Ä–¥–∞–∫ - —á–µ—Ä–µ–∑ –Ω–∏—Ö —É—Ö–æ–¥–∏—Ç –º–Ω–æ–≥–æ —Ç–µ–ø–ª–∞",
        "ü™ü –ò—Å–ø–æ–ª—å–∑—É–π –ø–ª–æ—Ç–Ω—ã–µ —à—Ç–æ—Ä—ã –∑–∏–º–Ω–∏–º–∏ –≤–µ—á–µ—Ä–∞–º–∏",
        "üîÜ –ó–∞–∫—Ä—ã–≤–∞–π –¥–≤–µ—Ä–∏ –≤ –∫–æ–º–Ω–∞—Ç—ã —á—Ç–æ–±—ã –Ω–µ —Ç–µ—Ä—è—Ç—å —Ç–µ–ø–ª–æ",
        "üå°Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º—ã–π —Ç–µ—Ä–º–æ—Å—Ç–∞—Ç",
        "üè† –ü–æ—Å–∞–¥–∏ –¥–µ—Ä–µ–≤—å—è –æ–∫–æ–ª–æ –¥–æ–º–∞ - –æ–Ω–∏ –∑–∞—â–∏—Ç—è—Ç –æ—Ç –≤–µ—Ç—Ä–∞ –∑–∏–º–æ–π"
    ],
    "–ø—Ä–∏–±–æ—Ä—ã": [
        "üì∫ –í—ã–∫–ª—é—á–∞–π —Ç–µ–ª–µ–≤–∏–∑–æ—Ä –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é, –∞ –Ω–µ –≤ —Ä–µ–∂–∏–º–µ standby",
        "üç≥ –ì–æ—Ç–æ–≤—å —Å –∑–∞–∫—Ä—ã—Ç–æ–π –∫—Ä—ã—à–∫–æ–π - —ç—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç —ç–Ω–µ—Ä–≥–∏—é",
        "üî• –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ—Å—É–¥—É —Å –ø–ª–æ—Å–∫–∏–º –¥–Ω–æ–º –Ω–∞ —ç–ª–µ–∫—Ç—Ä–æ–ø–ª–∏—Ç–∞—Ö",
        "üßä –†–∞–∑–º–æ—Ä–∞–∂–∏–≤–∞–π —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ —Ä–µ–≥—É–ª—è—Ä–Ω–æ",
        "üå¨Ô∏è –ß–∏—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä—ã –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–∞ –∏ –ø—ã–ª–µ—Å–æ—Å–∞",
        "üîå –ù–µ —Å—Ç–∞–≤—å –≥–æ—Ä—è—á—É—é –µ–¥—É –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫",
        "üíª –ò—Å–ø–æ–ª—å–∑—É–π –Ω–æ—É—Ç–±—É–∫ –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ - –æ–Ω —ç–∫–æ–Ω–æ–º–∏—á–Ω–µ–µ",
        "üç≥ –ò—Å–ø–æ–ª—å–∑—É–π —Å–∫–æ—Ä–æ–≤–∞—Ä–∫—É - –æ–Ω–∞ –≥–æ—Ç–æ–≤–∏—Ç –±—ã—Å—Ç—Ä–µ–µ –∏ —ç–∫–æ–Ω–æ–º–∏—Ç —ç–Ω–µ—Ä–≥–∏—é",
        "üîå –û—Ç–∫–ª—é—á–∞–π –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–∏–±–æ—Ä—ã –∏–∑ —Ä–æ–∑–µ—Ç–æ–∫",
        "üì± –ó–∞–∫—Ä—ã–≤–∞–π –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ",
        "üßä –î–µ—Ä–∂–∏ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º - –ø—É—Å—Ç–æ–º—É –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏",
        "üîå –ò—Å–ø–æ–ª—å–∑—É–π –º—É–ª—å—Ç–∏–≤–∞—Ä–∫—É - –æ–Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –æ–±—ã—á–Ω–æ–π –ø–ª–∏—Ç—ã"
    ],
    "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç": [
        "üö∂ –•–æ–¥–∏ –ø–µ—à–∫–æ–º –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è",
        "üö≤ –ò—Å–ø–æ–ª—å–∑—É–π –≤–µ–ª–æ—Å–∏–ø–µ–¥ –≤–º–µ—Å—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è",
        "üöå –ü–æ–ª—å–∑—É–π—Å—è –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º",
        "üöó –í—ã–±–∏—Ä–∞–π —ç–∫–æ–Ω–æ–º–∏—á–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π",
        "üõ¥ –ò—Å–ø–æ–ª—å–∑—É–π —ç–ª–µ–∫—Ç—Ä–æ—Å–∞–º–æ–∫–∞—Ç –¥–ª—è –ø–æ–µ–∑–¥–æ–∫ –ø–æ –≥–æ—Ä–æ–¥—É",
        "üöó –°–ª–µ–¥–∏ –∑–∞ –¥–∞–≤–ª–µ–Ω–∏–µ–º –≤ —à–∏–Ω–∞—Ö - —ç—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç —Ç–æ–ø–ª–∏–≤–æ",
        "üöó –ù–µ –≥—Ä–µ–π –¥–≤–∏–≥–∞—Ç–µ–ª—å –¥–æ–ª–≥–æ –ø–µ—Ä–µ–¥ –ø–æ–µ–∑–¥–∫–æ–π",
        "üöÜ –ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π –ø–æ–µ–∑–¥–æ–º –≤–º–µ—Å—Ç–æ —Å–∞–º–æ–ª–µ—Ç–∞ –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ",
        "üöó –û–±—ä–µ–¥–∏–Ω—è–π –ø–æ–µ–∑–¥–∫–∏ - –ø–ª–∞–Ω–∏—Ä—É–π –º–∞—Ä—à—Ä—É—Ç –∑–∞—Ä–∞–Ω–µ–µ",
        "üö≤ –û—Ä–≥–∞–Ω–∏–∑—É–π –≤–µ–ª–æ–ø–∞—Ä–∫–æ–≤–∫–∏ —É —à–∫–æ–ª—ã"
    ],
    "—à–∫–æ–ª–∞": [
        "üí° –í—ã–∫–ª—é—á–∞–π —Å–≤–µ—Ç –≤ –ø—É—Å—Ç—ã—Ö –∫–ª–∞—Å—Å–∞—Ö",
        "üìö –ò—Å–ø–æ–ª—å–∑—É–π –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –±—É–º–∞–≥–∏ –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤",
        "üå± –°–æ–∑–¥–∞–π —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∫—Ä—É–∂–æ–∫ –≤ —à–∫–æ–ª–µ",
        "üì¢ –û—Ä–≥–∞–Ω–∏–∑—É–π –∞–∫—Ü–∏—é –ø–æ —Å–±–æ—Ä—É –±–∞—Ç–∞—Ä–µ–µ–∫",
        "‚ôªÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª—å–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –º—É—Å–æ—Ä–∞",
        "üí° –ü—Ä–æ–≤–æ–¥–∏ —É—Ä–æ–∫–∏ –ø—Ä–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏",
        "üìä –°–¥–µ–ª–∞–π –ø—Ä–æ–µ–∫—Ç –ø–æ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—é",
        "üå≥ –ü–æ—Å–∞–¥–∏ –¥–µ—Ä–µ–≤—å—è –Ω–∞ —à–∫–æ–ª—å–Ω–æ–º –¥–≤–æ—Ä–µ",
        "üíß –ü—Ä–æ–≤–µ—Ä—å, –Ω–µ—Ç –ª–∏ –ø—Ä–æ—Ç–µ–∫–∞—é—â–∏—Ö –∫—Ä–∞–Ω–æ–≤ –≤ —à–∫–æ–ª–µ",
        "üìö –ò—Å–ø–æ–ª—å–∑—É–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ —É—á–µ–±–Ω–∏–∫–∏ –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ"
    ]
}

FACTS = [
    "üí° –≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∞—è –ª–∞–º–ø–∞ —Å–ª—É–∂–∏—Ç –≤ 8 —Ä–∞–∑ –¥–æ–ª—å—à–µ –æ–±—ã—á–Ω–æ–π!",
    "üíß –í—ã–∫–ª—é—á–∞—è –≤–æ–¥—É –ø—Ä–∏ —á–∏—Å—Ç–∫–µ –∑—É–±–æ–≤, —Ç—ã —ç–∫–æ–Ω–æ–º–∏—à—å –¥–æ 10 –ª–∏—Ç—Ä–æ–≤ –≤–æ–¥—ã!",
    "üåç –≠–∫–æ–Ω–æ–º—è —ç–Ω–µ—Ä–≥–∏—é, —Ç—ã –ø–æ–º–æ–≥–∞–µ—à—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏—Ä–æ–¥—É –ë–µ–ª–∞—Ä—É—Å–∏!",
    "üí∞ –°–µ–º—å—è –∏–∑ 3 —á–µ–ª–æ–≤–µ–∫ –º–æ–∂–µ—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –¥–æ 50% –Ω–∞ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö —É—Å–ª—É–≥–∞—Ö!",
    "üîã –ë–∞—Ç–∞—Ä–µ–π–∫–∏, –≤—ã–±—Ä–æ—à–µ–Ω–Ω—ã–µ –≤ –ø—Ä–∏—Ä–æ–¥—É, –∑–∞–≥—Ä—è–∑–Ω—è—é—Ç 20 –º¬≤ –∑–µ–º–ª–∏!",
    "üìä –ë–µ–ª–∞—Ä—É—Å—å —ç–∫–æ–Ω–æ–º–∏—Ç —ç–Ω–µ—Ä–≥–∏—é, –∫–∞–∫ 2 –∞—Ç–æ–º–Ω—ã–µ —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–∏ –≤ –≥–æ–¥!",
    "üö≤ 1 —Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–Ω—ã–π –∫–í—Ç¬∑—á = 10 –∫–º –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ –±–µ–∑ –≤—Ä–µ–¥–∞ –¥–ª—è –ø—Ä–∏—Ä–æ–¥—ã!",
    "üå± –ö–∞–∂–¥–æ–µ –ø–æ—Å–∞–∂–µ–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –ø–æ–≥–ª–æ—â–∞–µ—Ç 20 –∫–≥ CO2 –≤ –≥–æ–¥!",
    "üí° LED-–ª–∞–º–ø—ã –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç –≤ 10 —Ä–∞–∑ –º–µ–Ω—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏ —á–µ–º –ª–∞–º–ø—ã –Ω–∞–∫–∞–ª–∏–≤–∞–Ω–∏—è!",
    "üö∞ –ö–∞–ø–∞—é—â–∏–π –∫—Ä–∞–Ω –∑–∞ —Å—É—Ç–∫–∏ —Ç–µ—Ä—è–µ—Ç –¥–æ 30 –ª–∏—Ç—Ä–æ–≤ –≤–æ–¥—ã!",
    "üîå –†–µ–∂–∏–º standby —Ç—Ä–∞—Ç–∏—Ç –¥–æ 10% —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏ –≤ –¥–æ–º–µ!",
    "üå°Ô∏è –°–Ω–∏–∂–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –Ω–∞ 1¬∞C —ç–∫–æ–Ω–æ–º–∏—Ç 5% —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏–µ!",
    "üç≥ –ì–æ—Ç–æ–≤–∫–∞ —Å –∑–∞–∫—Ä—ã—Ç–æ–π –∫—Ä—ã—à–∫–æ–π —ç–∫–æ–Ω–æ–º–∏—Ç –¥–æ 60% —ç–Ω–µ—Ä–≥–∏–∏!",
    "üöó –í–µ–ª–æ—Å–∏–ø–µ–¥ –≤–º–µ—Å—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –Ω–∞ 5 –∫–º —ç–∫–æ–Ω–æ–º–∏—Ç 1 –∫–≥ CO2!",
    "üíß –î—É—à –≤–º–µ—Å—Ç–æ –≤–∞–Ω–Ω—ã —ç–∫–æ–Ω–æ–º–∏—Ç –¥–æ 150 –ª–∏—Ç—Ä–æ–≤ –≤–æ–¥—ã!",
    "üåû 1 —á–∞—Å —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ —Å–≤–µ—Ç–∞ = –≥–æ–¥–æ–≤–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è –ó–µ–º–ª–∏!"
]

# –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
KNOWLEDGE_BASE = {
    "—ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ": [
        "–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ - —ç—Ç–æ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –∑–∞—â–∏—Ç—ã –ø—Ä–∏—Ä–æ–¥—ã",
        "–≠–∫–æ–Ω–æ–º—è —ç–Ω–µ—Ä–≥–∏—é, –º—ã –ø–æ–º–æ–≥–∞–µ–º –ë–µ–ª–∞—Ä—É—Å–∏ —Å—Ç–∞—Ç—å –±–æ–ª–µ–µ —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π!",
        "–ö–∞–∂–¥—ã–π –º–æ–∂–µ—Ç –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥ –≤ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏: –≤—ã–∫–ª—é—á–∞—Ç—å —Å–≤–µ—Ç, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–∫–æ–Ω–æ–º–Ω—ã–µ –ø—Ä–∏–±–æ—Ä—ã",
        "–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –º–∞–ª–æ–≥–æ: –≤—ã–∫–ª—é—á–µ–Ω–Ω—ã–π —Å–≤–µ—Ç, –∑–∞–∫—Ä—ã—Ç—ã–π –∫—Ä–∞–Ω, –≤—ã–Ω—É—Ç–∞—è –∑–∞—Ä—è–¥–∫–∞",
        "–í –ë–µ–ª–∞—Ä—É—Å–∏ –¥–µ–π—Å—Ç–≤—É–µ—Ç –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—é –¥–æ 2025 –≥–æ–¥–∞"
    ],
    "—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ": [
        "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ –º–æ–∂–Ω–æ —ç–∫–æ–Ω–æ–º–∏—Ç—å —Å –ø–æ–º–æ—â—å—é LED-–ª–∞–º–ø, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç –Ω–∞ 80% –º–µ–Ω—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏",
        "–í—ã–∫–ª—é—á–∞–π—Ç–µ –ø—Ä–∏–±–æ—Ä—ã –∏–∑ —Ä–æ–∑–µ—Ç–∫–∏ - –¥–∞–∂–µ –≤ —Ä–µ–∂–∏–º–µ –æ–∂–∏–¥–∞–Ω–∏—è –æ–Ω–∏ —Ç—Ä–∞—Ç—è—Ç —ç–Ω–µ—Ä–≥–∏—é!",
        "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –¥–Ω–µ–º - —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –≥–ª–∞–∑",
        "–£–º–Ω—ã–µ —Ä–æ–∑–µ—Ç–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥ —ç–Ω–µ—Ä–≥–∏–∏ –∏ –≤—ã–∫–ª—é—á–∞—Ç—å –ø—Ä–∏–±–æ—Ä—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é",
        "–°–æ–ª–Ω–µ—á–Ω—ã–µ –±–∞—Ç–∞—Ä–µ–∏ –Ω–∞ –∫—Ä—ã—à–µ –º–æ–≥—É—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –¥–æ–º —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏ —á–∏—Å—Ç–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π"
    ],
    "–≤–æ–¥–∞": [
        "–ó–∞–∫—Ä—ã–≤–∞–π—Ç–µ –∫—Ä–∞–Ω –∫–æ–≥–¥–∞ —á–∏—Å—Ç–∏—Ç–µ –∑—É–±—ã - —ç—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –¥–æ 10 –ª–∏—Ç—Ä–æ–≤ –≤–æ–¥—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑!",
        "–ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ –¥—É—à –≤–º–µ—Å—Ç–æ –≤–∞–Ω–Ω—ã - —ç–∫–æ–Ω–æ–º–∏—è –¥–æ 100 –ª–∏—Ç—Ä–æ–≤ –∑–∞ –æ–¥–∏–Ω —Ä–∞–∑",
        "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∞—ç—Ä–∞—Ç–æ—Ä—ã –Ω–∞ –∫—Ä–∞–Ω—ã - –æ–Ω–∏ —Å–º–µ—à–∏–≤–∞—é—Ç –≤–æ–¥—É —Å –≤–æ–∑–¥—É—Ö–æ–º –∏ —É–º–µ–Ω—å—à–∞—é—Ç —Ä–∞—Å—Ö–æ–¥",
        "–°—Ç–∏—Ä–∞–π—Ç–µ –æ–¥–µ–∂–¥—É –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∏—Ä–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã",
        "–°–æ–±–∏—Ä–∞–π—Ç–µ –¥–æ–∂–¥–µ–≤—É—é –≤–æ–¥—É –¥–ª—è –ø–æ–ª–∏–≤–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π - —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞—Å—Ç–µ–Ω–∏–π"
    ],
    "–æ—Ç–æ–ø–ª–µ–Ω–∏–µ": [
        "–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ 20-22¬∞C - –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ –∏ —ç–∫–æ–Ω–æ–º–Ω–æ",
        "–£—Ç–µ–ø–ª–∏—Ç–µ –æ–∫–Ω–∞ –∏ –¥–≤–µ—Ä–∏ - —ç—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ç–µ–ø–ª–æ –∑–∏–º–æ–π –∏ –ø—Ä–æ—Ö–ª–∞–¥—É –ª–µ—Ç–æ–º",
        "–ù–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ –±–∞—Ç–∞—Ä–µ–∏ –º–µ–±–µ–ª—å—é - —Ç–µ–ø–ª–æ –¥–æ–ª–∂–Ω–æ —Å–≤–æ–±–æ–¥–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å—Å—è",
        "–¢–µ–ø–ª–æ–æ—Ç—Ä–∞–∂–∞—é—â–∏–µ —ç–∫—Ä–∞–Ω—ã –∑–∞ –±–∞—Ç–∞—Ä–µ—è–º–∏ –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç —Ç–µ–ø–ª–æ –≤ –∫–æ–º–Ω–∞—Ç—É",
        "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º—ã–µ —Ç–µ—Ä–º–æ—Å—Ç–∞—Ç—ã —ç–∫–æ–Ω–æ–º—è—Ç –¥–æ 15% —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏–µ"
    ],
    "–ø—Ä–∏–±–æ—Ä—ã": [
        "–ü–æ–∫—É–ø–∞–π—Ç–µ —Ç–µ—Ö–Ω–∏–∫—É –∫–ª–∞—Å—Å–∞ –ê+++ - –æ–Ω–∞ —Å–∞–º–∞—è —ç–∫–æ–Ω–æ–º–∏—á–Ω–∞—è",
        "–†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–∞–∑–º–æ—Ä–∞–∂–∏–≤–∞–π—Ç–µ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ - –Ω–∞–ª–µ–¥—å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞—Å—Ö–æ–¥ —ç–Ω–µ—Ä–≥–∏–∏",
        "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Å—É–¥–æ–º–æ–µ—á–Ω—É—é –º–∞—à–∏–Ω—É –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ - —ç—Ç–æ —ç–∫–æ–Ω–æ–º–Ω–µ–µ –º—ã—Ç—å—è –≤—Ä—É—á–Ω—É—é",
        "–ù–æ—É—Ç–±—É–∫–∏ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç –º–µ–Ω—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏ —á–µ–º —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã",
        "–ó–∞—Ä—è–¥–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å —ç–Ω–µ—Ä–≥–∏—é –¥–∞–∂–µ –∫–æ–≥–¥–∞ –Ω–µ –∑–∞—Ä—è–∂–∞—é—Ç"
    ],
    "—à–∫–æ–ª–∞": [
        "–í —à–∫–æ–ª–µ —Ç–æ–∂–µ –º–æ–∂–Ω–æ —ç–∫–æ–Ω–æ–º–∏—Ç—å: –≤—ã–∫–ª—é—á–∞—Ç—å —Å–≤–µ—Ç –≤ –ø—É—Å—Ç—ã—Ö –∫–ª–∞—Å—Å–∞—Ö",
        "–†–∞—Å—Å–∫–∞–∂–∏ –¥—Ä—É–∑—å—è–º –æ–± —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–∏ - –≤–º–µ—Å—Ç–µ –º—ã —Å–º–æ–∂–µ–º –±–æ–ª—å—à–µ!",
        "–£—á–∞—Å—Ç–≤—É–π –≤ —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö —à–∫–æ–ª—ã - —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ",
        "–û—Ä–≥–∞–Ω–∏–∑—É–π —Å–±–æ—Ä –º–∞–∫—É–ª–∞—Ç—É—Ä—ã –≤ —à–∫–æ–ª–µ - —ç—Ç–æ —Å–ø–∞—Å–∞–µ—Ç –¥–µ—Ä–µ–≤—å—è",
        "–ü—Ä–µ–¥–ª–æ–∂–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ —à–∫–æ–ª–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª—å–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –º—É—Å–æ—Ä–∞"
    ],
    "–±–µ–ª–∞—Ä—É—Å—å": [
        "–ë–µ–ª–∞—Ä—É—Å—å –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º—É—é —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫—É",
        "–í –Ω–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ –µ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è",
        "–ú–Ω–æ–≥–∏–µ —à–∫–æ–ª—ã –ë–µ–ª–∞—Ä—É—Å–∏ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –ø–æ —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
        "–í –ë–µ–ª–∞—Ä—É—Å–∏ —Å—Ç—Ä–æ—è—Ç—Å—è –≤–µ—Ç—Ä—è–Ω—ã–µ —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–∏",
        "–ë–µ–ª–∞—Ä—É—Å—å —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞–µ—Ç —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ç—Ä–∞–Ω–∞–º–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è"
    ],
    "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç": [
        "–í–µ–ª–æ—Å–∏–ø–µ–¥ - —Å–∞–º—ã–π —ç–∫–æ–ª–æ–≥–∏—á–Ω—ã–π –≤–∏–¥ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞",
        "–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –ª–∏—á–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π",
        "–ü–µ—à–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è –∏ –ø—Ä–∏—Ä–æ–¥—ã",
        "–≠–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –≤ –ë–µ–ª–∞—Ä—É—Å–∏",
        "–ö–∞—Ä—à–µ—Ä–∏–Ω–≥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏—á–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å"
    ],
    "–ø—Ä–∏—Ä–æ–¥–∞": [
        "–ö–∞–∂–¥–æ–µ —Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–Ω–æ–µ –∫–í—Ç¬∑—á —Å–ø–∞—Å–∞–µ—Ç –ø—Ä–∏—Ä–æ–¥—É –æ—Ç –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è",
        "–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –±–æ—Ä–æ—Ç—å—Å—è —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫–ª–∏–º–∞—Ç–∞",
        "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–µ—Å–æ–≤ –≤–∞–∂–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∫–∏—Å–ª–æ—Ä–æ–¥–∞",
        "–ß–∏—Å—Ç–∞—è –≤–æ–¥–∞ - —Ü–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –±–µ—Ä–µ—á—å",
        "–†–∞–∑–¥–µ–ª—å–Ω—ã–π —Å–±–æ—Ä –º—É—Å–æ—Ä–∞ –ø–æ–º–æ–≥–∞–µ—Ç –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç—Ö–æ–¥—ã"
    ]
}

# –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ–º
KEYWORDS = {
    "—ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ": ["—ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ","—ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–∏–∂–µ–Ω–∏–µ", "—ç–∫–æ–Ω–æ–º–∏—è —ç–Ω–µ—Ä–≥–∏–∏", "—Å–æ—Ö—Ä–∞–Ω—è—Ç—å —ç–Ω–µ—Ä–≥–∏—é", "—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é", "—Å–±–µ—Ä–µ–≥–∞—Ç—å —ç–Ω–µ—Ä–≥–∏—é","–±–µ—Ä–µ—á—å —ç–Ω–µ—Ä–≥–∏—é", "—ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å", "—ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é"],
    "—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ": ["—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ", "—Å–≤–µ—Ç", "–ª–∞–º–ø–∞", "—Å–æ—Ö—Ä–∞–Ω—è—Ç—å —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—é", "—Å–±–µ—Ä–µ–≥–∞—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ", "—Ä–æ–∑–µ—Ç–∫–∞", "—ç–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–±–æ—Ä", "—ç–Ω–µ—Ä–≥–∏—è", "—ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è", "led", "–ª–∞–º–ø–æ—á–∫–∞"],
    "–≤–æ–¥–∞": ["–≤–æ–¥–∞", "–∫—Ä–∞–Ω", "–¥—É—à", "–≤–∞–Ω–Ω–∞", "–≤–æ–¥–æ–ø—Ä–æ–≤–æ–¥", "–ø–æ–ª–∏–≤", "—ç–∫–æ–Ω–æ–º–∏—è –≤–æ–¥—ã", "—Å–±–µ—Ä–µ–≥–∞—Ç—å –≤–æ–¥—É", "—Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤–æ–¥—É", "–±–µ—Ä–µ—á—å –≤–æ–¥—É"],
    "–æ—Ç–æ–ø–ª–µ–Ω–∏–µ": ["–æ—Ç–æ–ø–ª–µ–Ω–∏–µ", "–±–∞—Ç–∞—Ä–µ—è", "—Ç–µ–ø–ª–æ", "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞", "–æ–±–æ–≥—Ä–µ–≤", "—Ö–æ–ª–æ–¥", "—É—Ç–µ–ø–ª–µ–Ω–∏–µ", "—Ç–µ—Ä–º–æ—Å—Ç–∞—Ç"],
    "–ø—Ä–∏–±–æ—Ä—ã": ["–ø—Ä–∏–±–æ—Ä", "—Ç–µ—Ö–Ω–∏–∫–∞", "—Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫", "—Ç–µ–ª–µ–≤–∏–∑–æ—Ä", "–∫–æ–º–ø—å—é—Ç–µ—Ä", "–∑–∞—Ä—è–¥–∫–∞", "–ø–æ—Å—É–¥–æ–º–æ–π–∫–∞", "—Å—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞", "–º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞", "—ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞"],
    "—à–∫–æ–ª–∞": ["—à–∫–æ–ª–∞", "–∫–ª–∞—Å—Å", "–∫–ª–∞—Å", "—É—Ä–æ–∫", "—É—á–∏—Ç–µ–ª—å", "–æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫", "—É—á–µ–±–Ω–∏–∫", "—à–∫–æ–ª—å–Ω–∏–∫"],
    "–±–µ–ª–∞—Ä—É—Å—å": ["–±–µ–ª–∞—Ä—É—Å—å", "—Ä–±", "–Ω–∞—à–∞ —Å—Ç—Ä–∞–Ω–∞", "–º–∏–Ω—Å–∫", "–±–µ–ª–æ—Ä—É—Å—Å–∫–∏–π", "–±–µ–ª–æ—Ä—É—Å—å", "–±–µ–ª–∞—Ä—É—Å–∏"],
    "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç": ["—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "–º–∞—à–∏–Ω–∞", "–∞–≤—Ç–æ–º–æ–±–∏–ª—å", "–≤–µ–ª–æ—Å–∏–ø–µ–¥", "–∞–≤—Ç–æ–±—É—Å", "–º–µ—Ç—Ä–æ", "–ø–æ–µ–∑–¥", "–µ–∑–¥–∏—Ç—å", "–∞–≤—Ç–æ", "—Ç–æ–ø–ª–∏–≤–æ"],
    "–ø—Ä–∏—Ä–æ–¥–∞": ["–ø—Ä–∏—Ä–æ–¥–∞", "—ç–∫–æ–ª–æ–≥–∏—è", "–æ–∫—Ä—É–∂–∞—é—â–∞—è —Å—Ä–µ–¥–∞", "–∫–ª–∏–º–∞—Ç", "–∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ", "–ª–µ—Å", "–≤–æ–∑–¥—É—Ö", "—á–∏—Å—Ç–æ—Ç–∞"]
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–∏–Ω–≥–∞ —Å–µ—Ä–≤–∏—Å–∞ (—á—Ç–æ–±—ã –Ω–µ –∑–∞—Å—ã–ø–∞–ª)
async def keep_alive_ping():
    """–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø–∏–Ω–≥—É–µ—Ç —Å–µ—Ä–≤–∏—Å —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å—ã–ø–∞–ª"""
    while True:
        try:
            async with aiohttp.ClientSession() as session:
                async with session.get(RENDER_URL, timeout=10) as response:
                    logger.info(f"‚úÖ –ü–∏–Ω–≥ —É—Å–ø–µ—à–µ–Ω: {response.status}")
        except Exception as e:
            logger.warning(f"‚ö†Ô∏è –ü–∏–Ω–≥ –Ω–µ —É–¥–∞–ª—Å—è: {e}")
        
        # –ñ–¥–µ–º 10 –º–∏–Ω—É—Ç –º–µ–∂–¥—É –ø–∏–Ω–≥–∞–º–∏
        await asyncio.sleep(600)  # 10 –º–∏–Ω—É—Ç

def start_keep_alive():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–∏–Ω–≥ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ"""
    loop = asyncio.new_event_loop()
    asyncio.set_event_loop(loop)
    loop.run_until_complete(keep_alive_ping())

# –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    welcome_text = f"""
ü§ñ –ü—Ä–∏–≤–µ—Ç, {user.first_name}! –Ø –±–æ—Ç ¬´–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞–π–∫–∞¬ª!

–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ —É–∑–Ω–∞—Ç—å:
‚Ä¢ –ö–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é –¥–æ–º–∞ –∏ –≤ —à–∫–æ–ª–µ
‚Ä¢ –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã –æ–± —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–∏  
‚Ä¢ –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –ë–µ–ª–∞—Ä—É—Å–∏

–í—ã–±–µ—Ä–∏, —á—Ç–æ —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç! üåü
    """
    
    keyboard = [
        [KeyboardButton("üí° –°–æ–≤–µ—Ç—ã"), KeyboardButton("üåç –§–∞–∫—Ç—ã")],
        [KeyboardButton("üéÆ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞"), KeyboardButton("üèÜ –ß–µ–ª–ª–µ–Ω–¥–∂")],
        [KeyboardButton("üìö –°—Å—ã–ª–∫–∏"), KeyboardButton("‚ÑπÔ∏è –û –ø—Ä–æ–µ–∫—Ç–µ")]
    ]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    
    await update.message.reply_text(welcome_text, reply_markup=reply_markup)

async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    help_text = """
üìñ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

/start - –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
/tips - –°–æ–≤–µ—Ç—ã –ø–æ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—é
/facts - –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã
/quiz - –ò–≥—Ä–∞-–≤–∏–∫—Ç–æ—Ä–∏–Ω–∞
/challenge - –≠–∫–æ-—á–µ–ª–ª–µ–Ω–¥–∂
/links - –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
/about - –û –ø—Ä–æ–µ–∫—Ç–µ
/help - –ü–æ–º–æ—â—å

üí¨ –¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã —Ç–µ–∫—Å—Ç–æ–º!
–ù–∞–ø—Ä–∏–º–µ—Ä:
‚Ä¢ "–ö–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ?"
‚Ä¢ "–ß—Ç–æ —Ç–∞–∫–æ–µ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ?"
‚Ä¢ "–°–æ–≤–µ—Ç—ã –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏ –≤–æ–¥—ã"

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é!
    """
    await update.message.reply_text(help_text)

async def tips_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /tips - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é —Å–æ–≤–µ—Ç–æ–≤"""
    await show_tips_menu(update, context)

async def facts_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /facts - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–∫—Ç"""
    await show_fact(update, context)

async def quiz_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /quiz - –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–∏–∫—Ç–æ—Ä–∏–Ω—É"""
    await start_quiz(update, context)

async def challenge_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /challenge - –∑–∞–ø—É—Å–∫–∞–µ—Ç —á–µ–ª–ª–µ–Ω–¥–∂"""
    await start_challenge(update, context)

async def links_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /links - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏"""
    await show_links(update, context)

async def about_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /about - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ"""
    await about_project(update, context)

async def ping_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞"""
    await update.message.reply_text("‚úÖ –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!")

async def wakeup_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –±–æ—Ç–∞"""
    await update.message.reply_text(
        "üîî –ë–æ—Ç –ø—Ä–æ–±—É–∂–¥–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!\n\n"
        "–ï—Å–ª–∏ —è —Å–Ω–æ–≤–∞ —É—Å–Ω—É, –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å /wakeup –∏–ª–∏ /start üò¥"
    )

async def show_tips_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):
    tips_keyboard = [
        [KeyboardButton("‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ"), KeyboardButton("üíß –í–æ–¥–∞")],
        [KeyboardButton("üî• –û—Ç–æ–ø–ª–µ–Ω–∏–µ"), KeyboardButton("üì∫ –ü—Ä–∏–±–æ—Ä—ã")],
        [KeyboardButton("üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç"), KeyboardButton("üè´ –®–∫–æ–ª–∞")],
        [KeyboardButton("üîô –ù–∞–∑–∞–¥")]
    ]
    reply_markup = ReplyKeyboardMarkup(tips_keyboard, resize_keyboard=True)
    await update.message.reply_text("–í—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å–æ–≤–µ—Ç–æ–≤:", reply_markup=reply_markup)

async def show_tips(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text
    category_map = {
        "‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ": "—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ",
        "üíß –í–æ–¥–∞": "–≤–æ–¥–∞", 
        "üî• –û—Ç–æ–ø–ª–µ–Ω–∏–µ": "–æ—Ç–æ–ø–ª–µ–Ω–∏–µ",
        "üì∫ –ü—Ä–∏–±–æ—Ä—ã": "–ø—Ä–∏–±–æ—Ä—ã",
        "üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç": "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç",
        "üè´ –®–∫–æ–ª–∞": "—à–∫–æ–ª–∞"
    }
    
    if text in category_map:
        category = category_map[text]
        tips = ENERGY_TIPS[category]
        tips_text = f"{text} - –ø–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:\n\n" + "\n".join([f"‚Ä¢ {tip}" for tip in tips])
        
        # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π, —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —á–∞—Å—Ç–∏
        if len(tips_text) > 4096:
            for i in range(0, len(tips_text), 4096):
                await update.message.reply_text(tips_text[i:i+4096])
        else:
            await update.message.reply_text(tips_text)
    else:
        await update.message.reply_text("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ –º–µ–Ω—é")
        
async def show_fact(update: Update, context: ContextTypes.DEFAULT_TYPE):
    fact = random.choice(FACTS)
    await update.message.reply_text(fact)

async def start_quiz(update: Update, context: ContextTypes.DEFAULT_TYPE):
    questions = [
        {
            "question": "–ß—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –±–æ–ª—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏?",
            "options": ["–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—é—â–∞—è –ª–∞–º–ø–∞", "–û–±—ã—á–Ω–∞—è –ª–∞–º–ø–∞", "–°–≤–µ—á–∞"],
            "answer": 0
        },
        {
            "question": "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É?",
            "options": ["–û—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –Ω–∞ 2 —á–∞—Å–∞", "–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ 5-10 –º–∏–Ω—É—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é", "–ù–µ –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞—Ç—å"],
            "answer": 1
        },
        {
            "question": "–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å –∑–∞—Ä—è–¥–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º?",
            "options": ["–û—Å—Ç–∞–≤–ª—è—Ç—å –≤ —Ä–æ–∑–µ—Ç–∫–µ –≤—Å–µ–≥–¥–∞", "–í—ã–Ω–∏–º–∞—Ç—å –ø–æ—Å–ª–µ –∑–∞—Ä—è–¥–∫–∏", "–ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å"],
            "answer": 1
        },
        {
            "question": "–ö–∞–∫–∞—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –∫–æ–º–Ω–∞—Ç–µ?",
            "options": ["18-20¬∞C", "20-22¬∞C", "24-26¬∞C", "16-18¬∞C"],
            "answer": 1
        },
        {
            "question": "–ß—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –±–æ–ª—å—à–µ –≤–æ–¥—ã?",
            "options": ["–î—É—à 5 –º–∏–Ω—É—Ç", "–í–∞–Ω–Ω–∞", "–î—É—à 15 –º–∏–Ω—É—Ç", "–ú—ã—Ç—å–µ –ø–æ—Å—É–¥—ã –ø–æ–¥ –ø—Ä–æ—Ç–æ—á–Ω–æ–π –≤–æ–¥–æ–π"],
            "answer": 0
        },
        {
            "question": "–ö–∞–∫–æ–π –∫–ª–∞—Å—Å —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∞–º—ã–π –ª—É—á—à–∏–π?",
            "options": ["–ê+++", "–í", "–°", "D"],
            "answer": 0
        },
        {
            "question": "–ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å –ø—Ä–æ—Ç–µ–∫–∞—é—â–∏–º –∫—Ä–∞–Ω–æ–º?",
            "options": ["–ù–∏—á–µ–≥–æ, —ç—Ç–æ –º–µ–ª–æ—á—å", "–ü–æ—á–∏–Ω–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ", "–ü–æ–¥—Å—Ç–∞–≤–∏—Ç—å –≤–µ–¥—Ä–æ", "–ü–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–º –∫—Ä–∞–Ω–æ–º"],
            "answer": 1
        },
        {
            "question": "–ö–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é –Ω–∞ –æ—Å–≤–µ—â–µ–Ω–∏–∏?",
            "options": ["–í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞—Ç—å –≤—Å–µ –ª–∞–º–ø—ã", "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–µ—Ç", "–ö—Ä–∞—Å–∏—Ç—å —Å—Ç–µ–Ω—ã –≤ —Ç–µ–º–Ω—ã–π —Ü–≤–µ—Ç", "–°—Ç–∞–≤–∏—Ç—å –º–µ–±–µ–ª—å —É –æ–∫–æ–Ω"],
            "answer": 1
        },
        {
            "question": "–ß—Ç–æ —ç–∫–æ–Ω–æ–º–Ω–µ–µ –¥–ª—è —Ä–∞–∑–æ–≥—Ä–µ–≤–∞ –ø–∏—â–∏?",
            "options": ["–ú–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞", "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è –ø–ª–∏—Ç–∞", "–ì–∞–∑–æ–≤–∞—è –ø–ª–∏—Ç–∞", "–î—É—Ö–æ–≤–∫–∞"],
            "answer": 0
        },
        {
            "question": "–ö–∞–∫–æ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç —Å–∞–º—ã–π —ç–∫–æ–ª–æ–≥–∏—á–Ω—ã–π?",
            "options": ["–ê–≤—Ç–æ–º–æ–±–∏–ª—å", "–í–µ–ª–æ—Å–∏–ø–µ–¥", "–ê–≤—Ç–æ–±—É—Å", "–ú–æ—Ç–æ—Ü–∏–∫–ª"],
            "answer": 1
        },
        {
            "question": "–°–∫–æ–ª—å–∫–æ –≤–æ–¥—ã —ç–∫–æ–Ω–æ–º–∏—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –∫—Ä–∞–Ω–∞ –ø—Ä–∏ —á–∏—Å—Ç–∫–µ –∑—É–±–æ–≤?",
            "options": ["1 –ª–∏—Ç—Ä", "5 –ª–∏—Ç—Ä–æ–≤", "10 –ª–∏—Ç—Ä–æ–≤", "20 –ª–∏—Ç—Ä–æ–≤"],
            "answer": 2
        },
        {
            "question": "–ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å –Ω–µ–Ω—É–∂–Ω—ã–º–∏ –≤–µ—â–∞–º–∏?",
            "options": ["–í—ã–±—Ä–æ—Å–∏—Ç—å", "–û—Ç–¥–∞—Ç—å –Ω–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫—É", "–°–∂–µ—á—å", "–û—Å—Ç–∞–≤–∏—Ç—å –≤ –≥–∞—Ä–∞–∂–µ"],
            "answer": 1
        },
        {
            "question": "–ö–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç—å –Ω–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏–∏?",
            "options": ["–£—Ç–µ–ø–ª–∏—Ç—å –æ–∫–Ω–∞", "–û—Ç–∫—Ä—ã—Ç—å –≤—Å–µ –æ–∫–Ω–∞", "–í–∫–ª—é—á–∏—Ç—å –æ–±–æ–≥—Ä–µ–≤–∞—Ç–µ–ª—å", "–ù–æ—Å–∏—Ç—å –¥–æ–º–∞ —à—É–±—É"],
            "answer": 0
        },
        {
            "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ?",
            "options": ["–¢—Ä–∞—Ç–∏—Ç—å –±–æ–ª—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏", "–†–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–Ω–µ—Ä–≥–∏—é", "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é", "–ü—Ä–æ–¥–∞–≤–∞—Ç—å —ç–Ω–µ—Ä–≥–∏—é"],
            "answer": 1
        },
        {
            "question": "–ö–∞–∫–æ–π –ø—Ä–∏–±–æ—Ä —Ç—Ä–∞—Ç–∏—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —ç–Ω–µ—Ä–≥–∏–∏ –≤ –¥–æ–º–µ?",
            "options": ["–¢–µ–ª–µ–≤–∏–∑–æ—Ä", "–•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫", "–ó–∞—Ä—è–¥–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞", "–ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –ª–∞–º–ø–∞"],
            "answer": 1
        }
    ]
    
    context.user_data['quiz_questions'] = questions
    context.user_data['quiz_index'] = 0
    context.user_data['quiz_score'] = 0
    
    await ask_quiz_question(update, context)

async def ask_quiz_question(update: Update, context: ContextTypes.DEFAULT_TYPE):
    questions = context.user_data.get('quiz_questions', [])
    index = context.user_data.get('quiz_index', 0)
    
    if index >= len(questions):
        score = context.user_data.get('quiz_score', 0)
        total = len(questions)
        result_text = f"üéâ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!\n–¢–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {score}/{total}\n"
        
        if score == total:
            result_text += "–û—Ç–ª–∏—á–Ω–æ! –¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å! üåü"
        elif score >= total * 0.7:
            result_text += "–û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ! –¢—ã –º–Ω–æ–≥–æ –∑–Ω–∞–µ—à—å –æ–± —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–∏! üìö"
        elif score >= total * 0.5:
            result_text += "–ù–µ–ø–ª–æ—Ö–æ! –ï—Å—Ç—å –∫—É–¥–∞ —Ä–∞—Å—Ç–∏! üí™"
        else:
            result_text += "–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑! –£—á–∏—Å—å —ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é! üîã"
            
        await update.message.reply_text(result_text)
        await start(update, context)
        return
    
    question = questions[index]
    options_text = "\n".join([f"{i+1}. {opt}" for i, opt in enumerate(question['options'])])
    quiz_text = f"‚ùì –í–æ–ø—Ä–æ—Å {index + 1} –∏–∑ {len(questions)}:\n{question['question']}\n\n{options_text}"
    
    keyboard = [[KeyboardButton(str(i+1)) for i in range(len(question['options']))]]
    keyboard.append([KeyboardButton("üîô –û—Ç–º–µ–Ω–∞")])
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    
    await update.message.reply_text(quiz_text, reply_markup=reply_markup)

async def handle_quiz_answer(update: Update, context: ContextTypes.DEFAULT_TYPE):
    answer = update.message.text
    
    if answer in ["üîô –û—Ç–º–µ–Ω–∞", "üîô –æ—Ç–º–µ–Ω–∞", "–æ—Ç–º–µ–Ω–∞"]:
        await start(update, context)
        return
    
    if not answer.isdigit():
        await update.message.reply_text("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ –Ω–æ–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (1, 2, 3)")
        return
    
    questions = context.user_data.get('quiz_questions', [])
    index = context.user_data.get('quiz_index', 0)
    
    if index < len(questions):
        user_answer = int(answer) - 1
        correct_answer = questions[index]['answer']
        
        if user_answer == correct_answer:
            context.user_data['quiz_score'] = context.user_data.get('quiz_score', 0) + 1
            await update.message.reply_text("‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü!")
        else:
            correct_text = questions[index]['options'][correct_answer]
            await update.message.reply_text(f"‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: {correct_text}")
        
        context.user_data['quiz_index'] = index + 1
        await ask_quiz_question(update, context)

async def start_challenge(update: Update, context: ContextTypes.DEFAULT_TYPE):
    challenges = [
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –≤—ã–∫–ª—é—á–∞—Ç—å —Å–≤–µ—Ç, –≤—ã—Ö–æ–¥—è –∏–∑ –∫–æ–º–Ω–∞—Ç—ã",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø—Ä–∏–Ω–∏–º–∞—Ç—å –¥—É—à –Ω–µ –±–æ–ª–µ–µ 5 –º–∏–Ω—É—Ç", 
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –≤—ã–Ω—É—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–∞—Ä—è–¥–∫–∏ –∏–∑ —Ä–æ–∑–µ—Ç–æ–∫",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥—É –æ —Å–ø–æ—Å–æ–±–µ —ç–∫–æ–Ω–æ–º–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ –ø—Ä–æ—Ç–µ–∫–∞—é—â–∏—Ö –∫—Ä–∞–Ω–æ–≤",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø–æ–µ—Ö–∞—Ç—å –≤ —à–∫–æ–ª—É –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ –∏–ª–∏ –ø–µ—à–∫–æ–º",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –±—É–º–∞–≥–∏",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: —Å–æ–±—Ä–∞—Ç—å –∏ —Å–¥–∞—Ç—å –±–∞—Ç–∞—Ä–µ–π–∫–∏ –Ω–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫—É",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø–æ—Å–∞–¥–∏—Ç—å –¥–µ—Ä–µ–≤–æ –∏–ª–∏ —Ü–≤–µ—Ç–æ–∫",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø—Ä–æ–≤–µ—Å—Ç–∏ –¥–µ–Ω—å –±–µ–∑ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –µ–¥—É —Å –∑–∞–∫—Ä—ã—Ç–æ–π –∫—Ä—ã—à–∫–æ–π",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª–∞—Å—Å —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–æ–º–∞—à–Ω–µ–π —Ç–µ—Ö–Ω–∏–∫–∏",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: —É—Ç–µ–ø–ª–∏—Ç—å –æ–∫–Ω–∞ –≤ —Å–≤–æ–µ–π –∫–æ–º–Ω–∞—Ç–µ",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª—å–Ω—ã–π —Å–±–æ—Ä –º—É—Å–æ—Ä–∞ –¥–æ–º–∞",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø–æ—Å—á–∏—Ç–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –≤–æ–¥—ã —ç–∫–æ–Ω–æ–º–∏—à—å –∑–∞ –¥–µ–Ω—å",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–∫–∞—Ç –æ–± —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–∏",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–¥–µ—é —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è –≤ —à–∫–æ–ª–µ",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–≤–µ—Ç –≤–º–µ—Å—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –ø—Ä–æ–≤–µ—Å—Ç–∏ —Å–µ–º–µ–π–Ω—ã–π —Å–æ–≤–µ—Ç –æ–± —ç–∫–æ–Ω–æ–º–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏",
        "üéØ –ó–∞–¥–∞–Ω–∏–µ: –Ω–∞–π—Ç–∏ –∏ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–æ—Ç–µ—Ä–∏ —ç–Ω–µ—Ä–≥–∏–∏ –¥–æ–º–∞"
    ]
    
    challenge = random.choice(challenges)
    await update.message.reply_text(f"üèÜ –≠–∫–æ-—á–µ–ª–ª–µ–Ω–¥–∂!\n\n{challenge}\n\n–í—ã–ø–æ–ª–Ω–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è –∑–∞ –Ω–æ–≤—ã–º! üåü")

async def show_links(update: Update, context: ContextTypes.DEFAULT_TYPE):
    links_text = """
üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:

‚Ä¢ minenergo.gov.by - –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ –ë–µ–ª–∞—Ä—É—Å–∏
‚Ä¢ energoeffect.gov.by - –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –ø–æ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—é
‚Ä¢ @energoeffectgovby - telegram-–∫–∞–Ω–∞–ª –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ –ø–æ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—é

üíö –°–æ—Ö—Ä–∞–Ω–∏–º —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è –±—É–¥—É—â–µ–≥–æ –ë–µ–ª–∞—Ä—É—Å–∏!
    """
    await update.message.reply_text(links_text)

async def about_project(update: Update, context: ContextTypes.DEFAULT_TYPE):
    about_text = """
‚ÑπÔ∏è –û –ø—Ä–æ–µ–∫—Ç–µ ¬´–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞–π–∫–∞¬ª

–ë–æ—Ç –¥–ª—è —à–∫–æ–ª—å–Ω–∏–∫–æ–≤ –ë–µ–ª–∞—Ä—É—Å–∏:
‚Ä¢ –£—á–∏–º —ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é
‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∞–∂–Ω–æ—Å—Ç—å —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è  
‚Ä¢ –î–µ–ª–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º
    """
    await update.message.reply_text(about_text)

async def handle_question(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    user_message = update.message.text.strip()
    
    # –í–°–ï–ì–î–ê –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞
    if 'quiz_questions' in context.user_data:
        # –ù–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –∫–Ω–æ–ø–∫–æ–π –æ—Ç–º–µ–Ω—ã
        if user_message in ["üîô –û—Ç–º–µ–Ω–∞", "üîô –æ—Ç–º–µ–Ω–∞"]:
            return False  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–∞–∫ –≤–æ–ø—Ä–æ—Å–∞, —á—Ç–æ–±—ã handle_message –æ–±—Ä–∞–±–æ—Ç–∞–ª –æ—Ç–º–µ–Ω—É
        return False
    
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥—ã
    if user_message.startswith('/'):
        return False
    
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –í–°–ï –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫)
    menu_items = [
        "üí° –°–æ–≤–µ—Ç—ã", "üåç –§–∞–∫—Ç—ã", "üéÆ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞", "üèÜ –ß–µ–ª–ª–µ–Ω–¥–∂", 
        "üìö –°—Å—ã–ª–∫–∏", "‚ÑπÔ∏è –û –ø—Ä–æ–µ–∫—Ç–µ", "üîô –ù–∞–∑–∞–¥", "üîô –û—Ç–º–µ–Ω–∞",
        "‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ", "üíß –í–æ–¥–∞", "üî• –û—Ç–æ–ø–ª–µ–Ω–∏–µ", "üì∫ –ü—Ä–∏–±–æ—Ä—ã",
        "üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "üè´ –®–∫–æ–ª–∞"  # –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏
    ]
    if user_message in menu_items:
        return False
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
    
    user_message_lower = user_message.lower()
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–º
    question_words = ['–∫–∞–∫', '—á—Ç–æ', '–ø–æ—á–µ–º—É', '–∑–∞—á–µ–º', '–∫–æ–≥–¥–∞', '–≥–¥–µ', '–∫—É–¥–∞', '–æ—Ç–∫—É–¥–∞', '—Å–∫–æ–ª—å–∫–æ', '—á–µ–π', '—á–µ–º']
    has_question_word = any(word in user_message_lower for word in question_words)
    has_question_mark = '?' in user_message
    
    # –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –≤–æ–ø—Ä–æ—Å–∞ - –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ –≤–æ–ø—Ä–æ—Å
    if not (has_question_word or has_question_mark):
        return False
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å "–ø–µ—á–∞—Ç–∞–µ—Ç"
    await context.bot.send_chat_action(chat_id=update.effective_chat.id, action="typing")
    
    # –ò—â–µ–º —Ç–µ–º—É –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
    found_topic = None
    for topic, keywords in KEYWORDS.items():
        if any(keyword in user_message_lower for keyword in keywords):
            found_topic = topic
            break
    
    if found_topic and found_topic in KNOWLEDGE_BASE:
        # –ù–∞—à–ª–∏ —Ç–µ–º—É - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –æ—Ç–≤–µ—Ç –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
        import random
        answer = random.choice(KNOWLEDGE_BASE[found_topic])
        await update.message.reply_text(
            f"üí° –ü–æ –≤–∞—à–µ–º—É –≤–æ–ø—Ä–æ—Å—É –æ '{found_topic}':\n\n{answer}\n\n"
            f"–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /tips"
        )
    else:
        # –ù–µ –Ω–∞—à–ª–∏ —Ç–µ–º—É - –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–æ–º–æ—â—å
        await update.message.reply_text(
            "ü§î –Ø —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –≤–æ–ø—Ä–æ—Å–∞—Ö —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è. –í—ã –º–æ–∂–µ—Ç–µ:\n\n"
            "‚Ä¢ –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ø—Ä–æ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ, –≤–æ–¥—É, –æ—Ç–æ–ø–ª–µ–Ω–∏–µ –∏–ª–∏ –ø—Ä–∏–±–æ—Ä—ã\n"
            "‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å /tips –¥–ª—è —Å–æ–≤–µ—Ç–æ–≤\n" 
            "‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å /facts –¥–ª—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤\n"
            "‚Ä¢ –ù–∞—á–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É /quiz\n\n"
            "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å –Ω–∞–ø—Ä–∏–º–µ—Ä: '–ö–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ?'"
        )
    
    return True

async def examples_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /examples - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤"""
    examples_text = """
üí¨ –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ —è –ø–æ–Ω–∏–º–∞—é:

‚Ä¢ "–ö–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ?"
‚Ä¢ "–°–æ–≤–µ—Ç—ã –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏ –≤–æ–¥—ã"
‚Ä¢ "–ß—Ç–æ —Ç–∞–∫–æ–µ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ?"
‚Ä¢ "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–±–æ—Ä—ã?"
‚Ä¢ "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ç–æ–ø–ª–µ–Ω–∏—è –≤ –¥–æ–º–µ"
‚Ä¢ "–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ –≤ —à–∫–æ–ª–µ"
‚Ä¢ "–ü—Ä–æ–≥—Ä–∞–º–º—ã —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è –≤ –ë–µ–ª–∞—Ä—É—Å–∏"
‚Ä¢ "–ö–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é –¥–æ–º–∞?"

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å - —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –ø–æ–º–æ—á—å! üåü
    """
    await update.message.reply_text(examples_text)

# –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text
    
    # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–∏–∫—Ç–æ—Ä–∏–Ω—É (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞)
    if 'quiz_questions' in context.user_data:
        if text in ["üîô –û—Ç–º–µ–Ω–∞", "üîô –æ—Ç–º–µ–Ω–∞"]:
            await start(update, context)
            return
        elif text.isdigit():
            await handle_quiz_answer(update, context)
            return
    
    # –ó–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é
    if text == "üí° –°–æ–≤–µ—Ç—ã":
        await show_tips_menu(update, context)
    elif text == "üåç –§–∞–∫—Ç—ã":
        await show_fact(update, context)
    elif text == "üéÆ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞":
        await start_quiz(update, context)
    elif text == "üèÜ –ß–µ–ª–ª–µ–Ω–¥–∂":
        await start_challenge(update, context)
    elif text == "üìö –°—Å—ã–ª–∫–∏":
        await show_links(update, context)
    elif text == "‚ÑπÔ∏è –û –ø—Ä–æ–µ–∫—Ç–µ":
        await about_project(update, context)
    elif text in ["‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ", "üíß –í–æ–¥–∞", "üî• –û—Ç–æ–ø–ª–µ–Ω–∏–µ", "üì∫ –ü—Ä–∏–±–æ—Ä—ã", "üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç", "üè´ –®–∫–æ–ª–∞"]:
        await show_tips(update, context)
    elif text == "üîô –ù–∞–∑–∞–¥":
        await start(update, context)
    else:
        # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –∫–Ω–æ–ø–∫–∞ –∏ –Ω–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ –≤–æ–ø—Ä–æ—Å
        is_question = await handle_question(update, context)
        if not is_question:
            await update.message.reply_text(
                "–ò—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é, –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –∑–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å —Ç–µ–∫—Å—Ç–æ–º!\n\n"
                "–ù–∞–ø—Ä–∏–º–µ—Ä: '–ö–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç—å –≤–æ–¥—É?' –∏–ª–∏ '–ß—Ç–æ —Ç–∞–∫–æ–µ —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ?'"
            )
            
async def error_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤"""
    error = context.error
    
    # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫—É –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã)
    if "terminated by other getUpdates request" in str(error):
        logger.warning("‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç")
        return
    
    # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –±–æ—Ç–∞
    if "Conflict" in str(error) or "RetryAfter" in str(error):
        logger.warning(f"‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ Telegram: {error}")
        return
    
    # –õ–æ–≥–∏—Ä—É–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏
    logger.error(f"‚ùå –û—à–∏–±–∫–∞: {error}")
    
    # –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–æ–ª—å–∫–æ –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
    if update and update.effective_message:
        try:
            await update.effective_message.reply_text(
                "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥."
            )
        except Exception:
            pass  # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

def run_bot():
    print("üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞–π–∫–∞...")
    
    try:
        # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        application = Application.builder().token(BOT_TOKEN).build()
        
        # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        application.add_handler(CommandHandler("start", start))
        application.add_handler(CommandHandler("help", help_command))
        application.add_handler(CommandHandler("tips", tips_command))
        application.add_handler(CommandHandler("facts", facts_command))
        application.add_handler(CommandHandler("quiz", quiz_command))
        application.add_handler(CommandHandler("challenge", challenge_command))
        application.add_handler(CommandHandler("links", links_command))
        application.add_handler(CommandHandler("about", about_command))
        application.add_handler(CommandHandler("examples", examples_command))
        application.add_handler(CommandHandler("ping", ping_command))
        application.add_handler(CommandHandler("wakeup", wakeup_command))
        
        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–ª—è –∫–Ω–æ–ø–æ–∫)
        application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
        application.add_error_handler(error_handler)
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –ø–∏–Ω–≥ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
        if RENDER_URL and not RENDER_URL.startswith("https://energy-saving-bot"):
            ping_thread = threading.Thread(target=start_keep_alive, daemon=True)
            ping_thread.start()
            print("üîî –ó–∞–ø—É—â–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è")
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
        print("=" * 50)
        print("ü§ñ –ë–æ—Ç '–≠–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–≥–∞–π–∫–∞' —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!")
        print("üìç –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Render.com")
        print("‚ö° –ì–æ—Ç–æ–≤ –∫ –ø—Ä–∏–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–π")
        print("=" * 50)
        
        application.run_polling(
            allowed_updates=Update.ALL_TYPES,
            drop_pending_updates=True,
            close_loop=False
        )
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞: {e}")

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è - –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏ –±–æ—Ç–∞, –∏ HTTP-—Å–µ—Ä–≤–µ—Ä"""
    # –ó–∞–ø—É—Å–∫–∞–µ–º Flask –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
    flask_thread = threading.Thread(target=run_flask, daemon=True)
    flask_thread.start()
    print("üåê HTTP-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è")
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ
    run_bot()

if __name__ == '__main__':
    main()





